<section class="ProfileContent ContentWrap">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <!-- <div class="MessageSearch">
                    <button> <img src="assets/SearchIcon.svg" alt="" /></button>
                    <input type="" name="" placeholder="Search Messages">
                </div> -->
      </div>

      <div class="col-md-9 recent-post">
        <div class="RecentMyPost">
          <div *ngIf="FinalArray.length == 0">
            <h2>Please subscribe to any Creator.</h2>
          </div>

          <div *ngIf="FinalArray.length > 0">
            <div *ngFor="let post of FinalArray; let i = index">
              <div class="RecentMyPostBody">
                <div class="RecentMyPostHead d-flex">
                  <div
                    class="RecentMyPostHeadLeft"
                    (click)="viewProfile(post.userName)"
                  >
                    <span>
                      <img [src]="post.profileImage" />
                    </span>
                    <h3>{{ post.displayName }}</h3>
                    <strong>@{{ post.userName }}</strong>
                  </div>
                  <div class="RecentMyPostHeadRight">
                    <div class="PostDate">
                      <span><img src="assets/PostsIcon.svg" alt="" /></span>
                      {{ post.date }}
                    </div>

                    <div *ngIf="post.type === 'exclusive'">
                      <div
                        *ngIf="post.isPurchase"
                        pTooltip="Contributed  on {{ post.pdate }}"
                        tooltipPosition="top"
                        class="DLC d-flex"
                        (click)="Buy(post, templateBuy)"
                      >
                        <strong>Exclusive</strong>

                        <span>$ {{ post.price }}</span>
                      </div>
                      <div
                        *ngIf="!post.isPurchase"
                        class="DLC d-flex"
                        (click)="Buy(post, templateBuy)"
                      >
                        <strong>Exclusive</strong
                        ><span> ${{ post.price }}</span>
                      </div>
                    </div>

                    <div *ngIf="post.type === 'pack'">
                      <div
                        *ngIf="post.isPurchase"
                        pTooltip="Purchased  on {{ post.pdate }}"
                        tooltipPosition="top"
                        class="DLC d-flex"
                        (click)="viewPack(post.id)"
                      >
                        <strong>DLC</strong>

                        <span>$ {{ post.price }}</span>
                      </div>
                      <div
                        *ngIf="!post.isPurchase"
                        class="DLC d-flex"
                        (click)="Buy(post, templateBuy)"
                      >
                        <strong>DLC</strong>

                        <span> ${{ post.price }}</span>
                      </div>
                    </div>

                    <div *ngIf="post.type === 'product'">
                      <div *ngIf="post.quantity_available > 0">
                        <div
                          *ngIf="post.isPurchase"
                          pTooltip="Purchased  on {{ post.pdate }}"
                          tooltipPosition="top"
                          class="DLC d-flex"
                          (click)="Buy(post, templateBuy)"
                        >
                          <strong>Product</strong>
                          <span>$ {{ post.price }}</span>
                        </div>
                        <div
                          *ngIf="!post.isPurchase"
                          class="DLC d-flex"
                          (click)="Buy(post, templateBuy)"
                        >
                          <strong>Product</strong>

                          <span> ${{ post.price }}</span>
                        </div>
                      </div>
                      <div *ngIf="post.quantity_available === 0">
                        <div class="DLC d-flex">
                          <strong>Sold out</strong>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="PostImage">
                  <div class="slider">
                    <carousel [interval]="false">
                      <div *ngIf="post.medias.image">
                        <slide *ngFor="let img of post.medias.image">
                          <img
                            [src]="img"
                            (click)="open(postImages, post.medias)"
                            alt=""
                            style="display: block; width: 100%"
                          />
                        </slide>
                      </div>
                      <div *ngIf="post.medias.video">
                        <slide *ngFor="let img of post.medias.video">
                          <video
                            controls
                            (click)="open(postImages, post.medias)"
                            alt=""
                            style="display: block; width: 100%"
                          >
                            <source [src]="img" />
                          </video>
                        </slide>
                      </div>
                    </carousel>
                    <div class="progrebssbar" *ngIf="post.type === 'exclusive'">
                      <p-progressBar [value]="post.goal_achieved_percent">
                      </p-progressBar>
                    </div>
                  </div>
                </div>
                <div class="PostOption">
                  <ul class="d-flex">
                    <ul
                      class="d-flex justify-content-between PostOptionInnerUL"
                      *ngIf="post.type === 'post'"
                    >
                      <li
                        class="d-flex CommentCounter mr-2"
                        (click)="LoadComments(post)"
                        *ngIf="post.comments"
                      >
                        <span
                          ><img src="assets/CommentIconBlue.svg" alt="" />
                        </span>
                        <strong *ngIf="post.total_comments > 0">{{
                          post.total_comments
                        }}</strong>
                      </li>

                      <li
                        class="d-flex CommentCounter mr-2"
                        *ngIf="!post.comments"
                      >
                        <span
                          ><img src="assets/CommentIconGreFill.svg" alt="" />
                        </span>
                      </li>
                      <li class="btn-group EmojiLoveDIV ml-auto" dropdown>
                        <span dropdownToggle class="dropdown-toggle">
                          <img
                            height="23px"
                            width="23px"
                            *ngIf="post.is60"
                            src="assets/Poop.png"
                            alt=""
                          />
                          <img
                            height="23px"
                            width="23px"
                            *ngIf="post.is70"
                            src="assets/emoji.png"
                            alt=""
                          />
                          <img
                            height="23px"
                            width="23px"
                            *ngIf="post.is80"
                            src="assets/smily.png"
                            alt=""
                          />
                          <img
                            height="23px"
                            width="23px"
                            *ngIf="post.is90"
                            src="assets/EmojiLove.svg"
                            alt=""
                          />
                          <img
                            height="23px"
                            width="23px"
                            *ngIf="post.is100"
                            src="assets/fire.png"
                            alt=""
                          />
                          <img
                            height="23px"
                            width="23px"
                            *ngIf="post.totalVotes == '0'"
                            src="assets/smily.png"
                            alt=""
                          />
                        </span>
                        <strong *ngIf="post.totalVotes > '0'">{{
                          post.totalVotes
                        }}</strong>
                        <ul
                          id="dropdown-basic"
                          *dropdownMenu
                          class="smile-list dropdown-menu dropdown-menu-center"
                          role="menu"
                        >
                          <div class="d-flex" *ngFor="let vote of post.votes">
                            <li>
                              <div class="EmojiLoveDIV-LI">
                                <img
                                  (click)="Voting('10', post)"
                                  src="assets/fire.png"
                                  alt=""
                                  id="10"
                                />
                                <span *ngIf="vote.ten > 0">{{ vote.ten }}</span>
                              </div>
                            </li>

                            <li>
                              <div class="EmojiLoveDIV-LI">
                                <img
                                  (click)="Voting('9', post)"
                                  src="assets/heart.png"
                                  alt=""
                                  id="9"
                                />
                                <span *ngIf="vote.nine > 0">{{
                                  vote.nine
                                }}</span>
                              </div>
                            </li>

                            <li>
                              <div class="EmojiLoveDIV-LI">
                                <img
                                  (click)="Voting('8', post)"
                                  src="assets/smily.png"
                                  alt=""
                                  id="8"
                                />
                                <span *ngIf="vote.eight > 0">{{
                                  vote.eight
                                }}</span>
                              </div>
                            </li>

                            <li>
                              <div class="EmojiLoveDIV-LI">
                                <img
                                  (click)="Voting('7', post)"
                                  src="assets/emoji.png"
                                  alt=""
                                  id="7"
                                />
                                <span *ngIf="vote.seven > 0">{{
                                  vote.seven
                                }}</span>
                              </div>
                            </li>

                            <li>
                              <div class="EmojiLoveDIV-LI">
                                <img
                                  (click)="Voting('6', post)"
                                  src="assets/Poop.png"
                                  alt=""
                                  id="6"
                                />
                                <span *ngIf="vote.six > 0">{{ vote.six }}</span>
                              </div>
                            </li>
                          </div>
                        </ul>
                      </li>
                    </ul>
                    <li class="ellipsisDropdown DropNone ml-auto">
                      <div class="btn-group" dropdown>
                        <span dropdownToggle class="dropdown-toggle"
                          ><img src="assets/eclipse.svg" alt=""
                        /></span>
                        <ul
                          id="dropdown-basic"
                          *dropdownMenu
                          class="smile-list FeePostDropdown dropdown-menu dropdown-menu-right"
                          role="menu"
                        >
                          <!-- <li>
                                                        <div class="d-flex">
                                                            <img src="assets/SharePost.svg" alt="" id="10">
                                                            <p>Shared Post</p>
                                                        </div>
                                                    </li> -->

                          <!-- <input [value]="post.link"> -->
                          <p
                            class="CopyLinkElement"
                            id="text-content{{ i }}"
                            name="text-content"
                          >
                            {{ post.link }}
                          </p>
                          <li>
                            <div class="d-flex">
                              <ngx-copy-to-clipboard
                                #clipboard
                                target="#text-content{{ i }}"
                                [action]="cut"
                                [success]="onSuccess"
                                [error]="onError"
                              >
                                <img src="assets/CopyPast.svg" alt="" id="10" />
                                Copy Post link
                              </ngx-copy-to-clipboard>
                              <!-- <p>Copy Post link</p> -->
                            </div>
                          </li>

                          <li>
                            <div class="d-flex" (click)="report()">
                              <img src="assets/Report.svg" alt="" id="10" />
                              <p>Report</p>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </div>

                <div class="ColorOption" *ngIf="post.tag">
                  <ul class="feed-list d-flex mr-2">
                    <li *ngFor="let hash of post.tags">
                      <span class="DanceColor"></span
                      ><strong>{{ hash }}</strong>
                    </li>
                  </ul>
                </div>

                <div class="mb-4" [ngxSummernoteView]="post.description"></div>

                <!-- new -->
                <div *ngIf="post.type === 'post'">
                  <div class="TypeComment d-flex mb-3" *ngIf="post.comments">
                    <div class="TypeCommentIMG">
                      <span><img [src]="loggedUserImage" /></span>
                    </div>
                    <div class="TypeCommentBox ml-auto">
                      <textarea
                        class="form-control"
                        placeholder="Add Comment..."
                        (blur)="onComment($event)"
                        id="comment"
                      ></textarea>
                      <a (click)="AddComment('comment', post)"
                        ><img src="assets/plane.svg" alt=""
                      /></a>
                    </div>
                  </div>
                  <div class="MultiComment" *ngIf="post.total_comments > 0">
                    <div class="d-flex" *ngFor="let cmt of post.commentArr">
                      <div *ngFor="let profile of cmt.profile">
                        <div
                          pTooltip="{{ profile.display_name }}  at {{
                            cmt.created_date
                          }}"
                          tooltipPosition="top"
                          class="MultiCommentIMG"
                        >
                          <span
                            *ngIf="subscriberUserID !== cmt.user_id"
                            (click)="viewProfile(profile.profile_url)"
                            ><img
                              class="img-responsive user-photo"
                              [src]="profile.profile_picture"
                          /></span>
                          <span *ngIf="subscriberUserID === cmt.user_id"
                            ><img
                              class="img-responsive user-photo"
                              [src]="profile.profile_picture"
                          /></span>
                        </div>
                      </div>
                      <div class="MultiCommentBody ml-auto">
                        <div
                          class="PostedComment"
                          *ngIf="!cmt.isModify; else editmode"
                        >
                          <p>
                            <button
                              *ngIf="cmt.amount > 0"
                              class="btn btn-primary"
                            >
                              {{ cmt.amount }}</button
                            >{{ cmt.comment }}
                          </p>
                        </div>
                        <ng-template #editmode>
                          <div
                            class="TypeCommentBox ml-auto w-100 mb-3"
                            *ngIf="cmt.isModify"
                          >
                            <textarea
                              class="form-control"
                              (blur)="onComment($event)"
                              >{{ cmt.comment }}</textarea
                            >
                            <a
                              *ngIf="subscriberUserID == cmt.user_id"
                              (click)="
                                AddComment('modify', post, cmt.comment_uid)
                              "
                              ><img src="assets/plane.svg" alt=""
                            /></a>
                          </div>
                        </ng-template>

                        <div class="CommentOption">
                          <ul class="d-flex">
                            <li>
                              <div
                                class="d-flex LikedIcon"
                                (click)="likeComment(cmt)"
                                *ngIf="!cmt.you_liked && !cmt.isLike"
                              >
                                <span></span>
                                <strong *ngIf="cmt.total_likes > '0'">{{
                                  cmt.total_likes
                                }}</strong>
                              </div>
                              <div
                                class="d-flex LikedIcon active"
                                (click)="unlikeComment(cmt)"
                                *ngIf="cmt.isLike || cmt.you_liked"
                              >
                                <span></span>
                                <strong *ngIf="cmt.total_likes > '0'">{{
                                  cmt.total_likes
                                }}</strong>
                              </div>
                            </li>
                            <!-- <li (click)="onTips(templateTips,'comment',cmt)"><a><img
                                                                            src="assets/Currency.svg" alt="" /></a></li> -->
                            <li (click)="reply(cmt)">
                              <a><img src="assets/backArrow.svg" alt="" /></a>
                            </li>
                            <li
                              class="ellipsisDropdown DropNone"
                              *ngIf="subscriberUserID === cmt.user_id"
                            >
                              <div class="btn-group" dropdown>
                                <span dropdownToggle class="dropdown-toggle"
                                  ><img src="assets/eclipse.svg" alt=""
                                /></span>
                                <ul
                                  id="dropdown-basic"
                                  *dropdownMenu
                                  class="smile-list dropdown-menu dropdown-menu-right"
                                  role="menu"
                                >
                                  <li (click)="updateComment(cmt)">
                                    <div class="d-flex">
                                      <img
                                        src="assets/edit-tools.svg"
                                        alt=""
                                        id="10"
                                      />
                                      <p>Edit</p>
                                    </div>
                                  </li>

                                  <li
                                    (click)="
                                      deleteComment('comment', post, cmt)
                                    "
                                  >
                                    <div class="d-flex">
                                      <img
                                        src="assets/interface.svg"
                                        alt=""
                                        id="10"
                                      />
                                      <p>Delete</p>
                                    </div>
                                  </li>
                                </ul>
                              </div>
                            </li>
                          </ul>
                        </div>
                        <div
                          class="TypeComment d-flex mb-3"
                          *ngIf="cmt.replaytoComment"
                        >
                          <div class="TypeCommentIMG">
                            <span><img [src]="loggedUserImage" /></span>
                          </div>
                          <div class="TypeCommentBox ml-auto">
                            <textarea
                              class="form-control"
                              placeholder="Add Comment..."
                              (blur)="onComment($event)"
                            ></textarea>
                            <a (click)="AddComment('reply', post)"
                              ><img src="assets/plane.svg" alt=""
                            /></a>
                          </div>
                        </div>
                        <div class="SubComments" *ngIf="cmt.reply">
                          <div
                            class="MultiComment d-flex"
                            *ngFor="let reply of cmt.reply"
                          >
                            <div *ngFor="let profile of reply.profile">
                              <div
                                pTooltip="{{ profile.display_name }}  at {{
                                  reply.created_date
                                }}"
                                tooltipPosition="top"
                                class="MultiCommentIMG"
                              >
                                <span
                                  *ngIf="subscriberUserID !== profile.user_id"
                                  (click)="viewProfile(profile.profile_url)"
                                  ><img
                                    class="img-responsive user-photo"
                                    [src]="profile.profile_picture"
                                /></span>
                                <span
                                  *ngIf="subscriberUserID === profile.user_id"
                                  ><img
                                    class="img-responsive user-photo"
                                    [src]="profile.profile_picture"
                                /></span>
                              </div>
                            </div>

                            <div class="MultiCommentBody">
                              <div
                                class="PostedComment"
                                *ngIf="!reply.isModify; else editmode"
                              >
                                <p>{{ reply.comment }}</p>
                              </div>
                              <ng-template #editmode>
                                <div
                                  class="TypeCommentBox ml-auto w-100 mb-3"
                                  *ngIf="reply.isModify"
                                >
                                  <textarea
                                    class="form-control"
                                    (blur)="onComment($event)"
                                    >{{ reply.comment }}</textarea
                                  >
                                  <a
                                    (click)="
                                      AddComment(
                                        'modify',
                                        post,
                                        reply.comment_uid
                                      )
                                    "
                                    ><img src="assets/plane.svg" alt=""
                                  /></a>
                                </div>
                              </ng-template>

                              <div class="CommentOption">
                                <ul class="d-flex">
                                  <li>
                                    <div
                                      class="d-flex LikedIcon"
                                      (click)="likeComment(reply)"
                                      *ngIf="!reply.you_liked && !reply.isLike"
                                    >
                                      <span></span>
                                      <strong *ngIf="reply.total_likes > '0'">{{
                                        reply.total_likes
                                      }}</strong>
                                    </div>
                                    <div
                                      class="d-flex LikedIcon active"
                                      (click)="unlikeComment(reply)"
                                      *ngIf="reply.isLike || reply.you_liked"
                                    >
                                      <span></span>
                                      <strong *ngIf="reply.total_likes > '0'">{{
                                        reply.total_likes
                                      }}</strong>
                                    </div>
                                  </li>
                                  <li
                                    class="ellipsisDropdown DropNone"
                                    *ngIf="subscriberUserID === reply.user_id"
                                  >
                                    <div class="btn-group" dropdown>
                                      <span
                                        dropdownToggle
                                        class="dropdown-toggle"
                                        ><img src="assets/eclipse.svg" alt=""
                                      /></span>
                                      <ul
                                        id="dropdown-basic"
                                        *dropdownMenu
                                        class="smile-list dropdown-menu dropdown-menu-right"
                                        role="menu"
                                      >
                                        <li (click)="updateComment(reply)">
                                          <div class="d-flex">
                                            <img
                                              src="assets/edit-tools.svg"
                                              alt=""
                                              id="10"
                                            />
                                            <p>Edit</p>
                                          </div>
                                        </li>

                                        <li
                                          (click)="
                                            deleteComment(
                                              'reply',
                                              post,
                                              cmt,
                                              reply
                                            )
                                          "
                                        >
                                          <div class="d-flex">
                                            <img
                                              src="assets/interface.svg"
                                              alt=""
                                              id="10"
                                            />
                                            <p>Delete</p>
                                          </div>
                                        </li>
                                      </ul>
                                    </div>
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div
                    class="ml-auto"
                    *ngIf="post.total_comments > 5 && post.commentArr"
                  >
                    <p (click)="loadMore(post)">Load More</p>
                  </div>
                </div>

                <!-- new -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="col-md-3 d-flex suggestionCreator"
        style=""
        *ngIf="SuggestionPopup"
      >
        <div class="SuggestionsDiv">
          <div class="SuggestionsTitle d-flex">
            <h2>Suggested Creators</h2>
            <span (click)="suggetionClose()"
              ><img src="assets/CloseWhite.svg"
            /></span>
          </div>
          <ul class="SuggestionsUl">
            <li *ngFor="let data of profiles">
              <div class="SuggestionBox d-flex">
                <div class="SuggestionPicture">
                  <span><img [src]="data.profile_picture" /></span>
                </div>

                <div class="SuggestionName">
                  <h3>{{ data.display_name }}</h3>
                  <a>{{ data.profile_url }}</a>
                </div>
                <div
                  class="SuggestionViewProfile"
                  (click)="viewProfile(data.profile_url)"
                >
                  <a>View Profile</a>
                </div>
              </div>
            </li>
          </ul>
          <div class="SuggestionViewMore" (click)="viewMore()">
            <a>View More</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<ng-template #templateBuy>
  <div class="modal-header">
    <h2>Confirm Purchase*</h2>
    <button class="close">
      <img src="assets/CloseBlue.svg" (click)="close()" alt="" />
    </button>
  </div>
  <div class="modal-body">
    <div>
      <div *ngIf="isExclusivePurchase">
        <div class="form-group">
          <label>Total Contribution</label>
          <p-dropdown
            class="form-control RadiusNone BorderNoneSelectBox"
            [options]="contributionsList"
            (onChange)="OnContributionChange($event)"
          ></p-dropdown>
          <div class="text-danger" *ngIf="isValue">
            Please select amount of contribution.
          </div>
        </div>
      </div>

      <div *ngIf="isProductPurchase">
        <table class="table">
          <tr>
            <th>Name</th>
            <th>Price</th>
            <th>Purchase</th>
            <th width="120">Qty</th>
          </tr>
          <tr>
            <td>{{ title }}</td>
            <td>{{ productCost }}</td>
            <td>Product</td>
            <td>
              <div class="qty">
                <button
                  class="button plus"
                  (click)="plus()"
                  [disabled]="isAvailQuantity"
                >
                  +
                </button>
                <input
                  type="text"
                  disabled
                  min="1"
                  id="qty"
                  class="form-control"
                  [(ngModel)]="quantity"
                />
                <button class="button minus" (click)="minus()">-</button>
              </div>
            </td>
          </tr>
        </table>
      </div>

      <div *ngIf="isPackPurchase">
        <div class="NetAmount">
          <!-- <h3>Pack Cost : <strong>{{packCost}}</strong></h3> -->
        </div>
      </div>
      <div *ngIf="isTaxShow">
        <div class="TotalSubTotal d-flex">
          <div>
            <p>Subtotal</p>

            <p>
              <strong>{{ basicTotal }}</strong>
            </p>
          </div>
          <div>
            <p>Taxes and fees</p>
            <p>
              <strong>{{ taxesAmount }}</strong>
            </p>
          </div>

          <div>
            <p>Total</p>

            <p>
              <strong>{{ finalTotal }}</strong>
            </p>
          </div>
        </div>
      </div>

      <div class="NetmountWrap" *ngIf="isCardDetails">
        <div class="SaveCard">
          <div class="row">
            <div class="col-md-12">
              <h4>Your Saved Card</h4>
            </div>

            <div *ngFor="let cards of savedCard" class="col-md-4">
              <div *ngIf="cards.show">
                <div class="SaveCardInfo d-flex">
                  <img src="assets/{{ cards.type }}.svg" />
                  <!-- <img *ngIf="assets/{{cards.type}}.svg" src="assets/CreditCard.svg" /> -->
                  <div class="form-control">{{ cards.cardNumber }}</div>
                </div>
              </div>
              <div class="d-flex" *ngIf="cards.show">
                <button
                  class="btn mr-1 btn-primary mr-2"
                  (click)="
                    card(cards.paymentProfileID, 'oldcard', templateInfo)
                  "
                >
                  Pay
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="col-md-5 ml-auto">
                    <button class="btn mr-0 btn-secondary w-100" (click)="displayForm()">Add new Card</button>
                </div> -->
      </div>

      <!-- card -->

      <div class="col-md-12 mt-5" *ngIf="showCard">
        <form
          class="row"
          [formGroup]="newCard"
          (ngSubmit)="onNewcardSubmit(newCard.valid, 'newcard', templateInfo)"
        >
          <div class="col-md-6">
            <h4>Billing Info</h4>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Full name</label>
                  <input
                    class="form-control"
                    type="text"
                    formControlName="newLegalName"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!newCard.get('newLegalName').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="newCard.get('newLegalName').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>Address</label>
                  <input
                    class="form-control"
                    type="text"
                    formControlName="newAddress"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!newCard.get('newAddress').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="newCard.get('newAddress').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>City</label>
                      <input
                        class="form-control"
                        type="text"
                        formControlName="newCity"
                      />
                      <div
                        class="ErrorMessageDIV"
                        *ngIf="!newCard.get('newCity').valid && submitted"
                      >
                        <div
                          class="text-danger"
                          *ngIf="newCard.get('newCity').errors['required']"
                        >
                          This field is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Zipcode</label>
                      <input
                        class="form-control"
                        type="number"
                        formControlName="newZipcode"
                      />
                      <div
                        class="ErrorMessageDIV"
                        *ngIf="!newCard.get('newZipcode').valid && submitted"
                      >
                        <div
                          class="text-danger"
                          *ngIf="newCard.get('newZipcode').errors['required']"
                        >
                          This field is required.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>State</label>
                        <input
                          class="form-control"
                          type="text"
                          formControlName="newState"
                        />
                        <div
                          class="ErrorMessageDIV"
                          *ngIf="!newCard.get('newState').valid && submitted"
                        >
                          <div
                            class="text-danger"
                            *ngIf="newCard.get('newState').errors['required']"
                          >
                            This field is required.
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Country</label>
                        <p-dropdown
                          class="form-control RadiusNone BorderNoneSelectBox"
                          [options]="countryList"
                          formControlName="newCountry"
                        ></p-dropdown>
                        <div
                          class="ErrorMessageDIV"
                          *ngIf="!newCard.get('newCountry').valid && submitted"
                        >
                          <div
                            class="text-danger"
                            *ngIf="newCard.get('newCountry').errors['required']"
                          >
                            This field is required.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <h4>Credit Card Info</h4>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Card Number</label>
                  <input
                    class="form-control"
                    type="text"
                    formControlName="newCardNumber"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!newCard.get('newCardNumber').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="newCard.get('newCardNumber').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>

                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!newCard.get('newCardNumber').valid"
                  >
                    <div
                      class="text-danger"
                      *ngIf="newCard.get('newCardNumber').errors['pattern']"
                    >
                      Please enter valid card number
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>Cardholder Name</label>
                  <input
                    class="form-control"
                    type="text"
                    formControlName="newCardName"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!newCard.get('newCardName').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="newCard.get('newCardName').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>Expire Date</label>
                  <p-calendar
                    class="form-control"
                    view="month"
                    dateFormat="mm/yy"
                    [yearNavigator]="true"
                    formControlName="newExpirydate"
                    yearRange="{{ minYear }}:{{ maxYear }}"
                    [readonlyInput]="true"
                  >
                  </p-calendar>
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!newCard.get('newExpirydate').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="newCard.get('newExpirydate').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>CVV</label>
                  <input
                    class="form-control"
                    type="password"
                    formControlName="newCvv"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!newCard.get('newCvv').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="newCard.get('newCvv').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group d-flex">
                  <p-checkbox
                    class="mr-2"
                    binary="true"
                    formControlName="defaultCard"
                    [(ngModel)]="setDefault"
                  >
                  </p-checkbox>
                  <p>Make this card as default</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-12 text-center mb-5">
            <button
              class="btn btn-primary"
              type="submit"
              [disabled]="showSpinnerNew"
            >
              Submit
              <i *ngIf="showSpinnerNew" class="fa fa-spinner fa-spin"></i>
            </button>
          </div>
        </form>
      </div>
      <!-- card -->
    </div>

    <div *ngIf="!isCardDetails">
      <!-- <div class="modal-header mb-4">
                <h4 class="text-primary">Add Card</h4>
                <button class="close"><img src="assets/CloseBlue.svg" (click)="modalRef.hide()" alt="" /></button>
            </div> -->
      <div class="col-md-12">
        <form
          class="row"
          [formGroup]="cardForm"
          (ngSubmit)="
            onSubmit(cardForm.valid, 'firstpay', templateInfo, templateFinal)
          "
        >
          <div class="col-md-6">
            <h4>Billing Info</h4>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Full name</label>
                  <input
                    class="form-control"
                    type="text"
                    formControlName="legal_name"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!cardForm.get('legal_name').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="cardForm.get('legal_name').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>Address</label>
                  <input
                    class="form-control"
                    type="text"
                    formControlName="address"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!cardForm.get('address').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="cardForm.get('address').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>City</label>
                      <input
                        class="form-control"
                        type="text"
                        formControlName="city"
                      />
                      <div
                        class="ErrorMessageDIV"
                        *ngIf="!cardForm.get('city').valid && submitted"
                      >
                        <div
                          class="text-danger"
                          *ngIf="cardForm.get('city').errors['required']"
                        >
                          This field is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Zipcode</label>
                      <input
                        class="form-control"
                        type="number"
                        formControlName="zipcode"
                      />
                      <div
                        class="ErrorMessageDIV"
                        *ngIf="!cardForm.get('zipcode').valid && submitted"
                      >
                        <div
                          class="text-danger"
                          *ngIf="cardForm.get('zipcode').errors['required']"
                        >
                          This field is required.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>State</label>
                      <input
                        class="form-control"
                        (blur)="taxCount()"
                        type="text"
                        formControlName="state"
                      />
                      <div
                        class="ErrorMessageDIV"
                        *ngIf="!cardForm.get('state').valid && submitted"
                      >
                        <div
                          class="text-danger"
                          *ngIf="cardForm.get('state').errors['required']"
                        >
                          This field is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Country</label>

                      <p-dropdown
                        class="form-control RadiusNone BorderNoneSelectBox"
                        [options]="countryList"
                        formControlName="country"
                      >
                      </p-dropdown>
                      <div
                        class="ErrorMessageDIV"
                        *ngIf="!cardForm.get('country').valid && submitted"
                      >
                        <div
                          class="text-danger"
                          *ngIf="cardForm.get('country').errors['required']"
                        >
                          This field is required.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <h4>Credit Card Info</h4>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Card Number</label>
                  <input
                    class="form-control"
                    type="text"
                    formControlName="cardNumber"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!cardForm.get('cardNumber').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="cardForm.get('cardNumber').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!cardForm.get('cardNumber').valid"
                  >
                    <div
                      class="text-danger"
                      *ngIf="cardForm.get('cardNumber').errors['pattern']"
                    >
                      Please enter valid card number
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>Cardholder Name</label>
                  <input
                    class="form-control"
                    type="text"
                    formControlName="cardName"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!cardForm.get('cardName').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="cardForm.get('cardName').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>Expire Date</label>
                  <p-calendar
                    class="form-control"
                    view="month"
                    dateFormat="mm/yy"
                    [yearNavigator]="true"
                    formControlName="expirydate"
                    yearRange="{{ minYear }}:{{ maxYear }}"
                    [readonlyInput]="true"
                  >
                  </p-calendar>
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!cardForm.get('expirydate').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="cardForm.get('expirydate').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label>CVV</label>
                  <input
                    class="form-control"
                    type="password"
                    formControlName="cvv"
                  />
                  <div
                    class="ErrorMessageDIV"
                    *ngIf="!cardForm.get('cvv').valid && submitted"
                  >
                    <div
                      class="text-danger"
                      *ngIf="cardForm.get('cvv').errors['required']"
                    >
                      This field is required.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-12 text-center mb-5">
            <button
              class="btn btn-primary"
              type="submit"
              [disabled]="showSpinner"
            >
              Submit <i *ngIf="showSpinner" class="fa fa-spinner fa-spin"></i>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="PaymentLogos">
    <ul class="d-flex">
      <li><img src="assets/Visa.svg" /></li>
      <li><img src="assets/MasterCard.svg" /></li>
      <li><img src="assets/Maestro.svg" /></li>
      <li><img src="assets/JCB.svg" /></li>
      <li><img src="assets/Discover.svg" /></li>
    </ul>
    <p>
      MS Media LLC, 611 Gateway Blvd, Suite 120, South San Francisco, California
      94080
    </p>
  </div>
</ng-template>

<ng-template #templateInfo>
  <div class="modal-header" *ngIf="isCardDetails">
    <h2>Required Information</h2>
    <button class="close">
      <img src="assets/CloseBlue.svg" (click)="close()" alt="" />
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-sm-12">
        <div class="form-group">
          <label> {{ infoRequired }}<span style="color: red">*</span></label>
          <input type="text" [(ngModel)]="information" class="form-control" />
        </div>
      </div>
    </div>
    <div class="text-center">
      <button
        class="btn btn-primary w-100"
        (click)="buyProduct()"
        [disabled]="showSpinner"
      >
        Submit <i *ngIf="showSpinner" class="fa fa-spinner fa-spin"></i>
      </button>
    </div>
  </div>
</ng-template>

<ng-template #templateFinal>
  <div class="modal-header">
    <h2>Your final Amount</h2>
    <button class="close">
      <img src="assets/CloseBlue.svg" (click)="close()" alt="" />
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-sm-12">
        <div class="TotalSubTotal d-flex">
          <div>
            <p>Subtotal</p>

            <p>
              <strong>{{ basicTotal }}</strong>
            </p>
          </div>
          <div>
            <p>Taxes and fees</p>
            <p>
              <strong>{{ taxesAmount }}</strong>
            </p>
          </div>

          <div>
            <p>Total</p>

            <p>
              <strong>{{ finalTotal }}</strong>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center">
      <button
        class="btn btn-primary w-100"
        (click)="onFinalSubmit()"
        [disabled]="showSpinner"
      >
        Submit <i *ngIf="showSpinner" class="fa fa-spinner fa-spin"></i>
      </button>
    </div>
  </div>
</ng-template>

<!-- Display large Image -->
<ng-template #postImages>
  <div class="modal-header">
    <h2>Media</h2>
    <button class="close">
      <img src="assets/CloseBlue.svg" (click)="close()" alt="" />
    </button>
  </div>
  <div class="modal-body">
    <carousel [interval]="false">
      <div *ngIf="mediaImages.image">
        <slide *ngFor="let img of mediaImages.image">
          <img
            (click)="hotlink(postId, img)"
            [src]="img"
            alt="first slide"
            style="display: block; width: 100%"
          />
        </slide>
      </div>
      <div *ngIf="mediaImages.video">
        <slide *ngFor="let img of mediaImages.video">
          <video
            controls
            (click)="hotlink(postId, img)"
            alt="first slide"
            style="display: block; width: 100%"
          >
            <source [src]="img" />
          </video>
        </slide>
      </div>
    </carousel>
  </div>
</ng-template>
<!-- Display large Image -->

<p-confirmDialog
  header="Confirmation"
  icon="pi pi-exclamation-triangle"
></p-confirmDialog>

<div
  class="search-results"
  infiniteScroll
  [infiniteScrollDistance]="2"
  [infiniteScrollThrottle]="50"
  (scrolled)="onScroll()"
></div>
